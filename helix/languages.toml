[[language]]
name = "json"
formatter = { command = "prettier", args = [
    "--parser",
    "json",
    "--tab-with",
    "2",
] }

[[language]]
name = "yaml"
auto-format = true
formatter = { command = "prettier", args = [
    "--parser",
    "yaml",
    "--tab-width",
    "2",
] }

[[language]]
name = "toml"
auto-format = true
formatter = { command = "prettier", args = [
    "--parser",
    "toml",
    "--tab-width",
    "2",
] }

[[language]]
name = "fish"
auto-format = true
formatter = { command = "fish_indent" }

[[language]]
name = "python"
language-servers = ["basedpyright", "ruff"]
auto-format = true
formatter = { command = "bash", args = ["-c", "ruff check --fix - | ruff format -"] }

[language-server.basedpyright]
command = "basedpyright-langserver"
args = ["--stdio"]

[language-server.basedpyright.config.basedpyright.analysis]
venvPath = "."
venv = ".venv"
lint = true
inlayHint.enable = true
authSearchPaths = true
autoImportCompletions = true
diagnosticMode = "workspace"
typeCheckingMode = "standard"
useLibraryCodeForType = true
reportOptionalSubscript = false
reportOptionalMemberAccess = false

[language-server.ruff]
command = "ruff"
args = ["server", "--preview"]

[[language]]
name = "rust"
language-servers = ["scls", "rust-analyzer"]
auto-format = true

[language-server.rust-analyzer.config]
imports = { preferPrelude = true, granularity = { group = "item", enforce = true }, prefix = "crate" }
check = { command = "clippy" }

[language-server.rust-analyzer.rustfmt]
extraArgs = ["+nightly"]

[[language]]
name = "hcl"
auto-format = true
formatter = { command = "terraform", args = ["fmt", "-"] }

[[language]]
name = "tfvars"
auto-format = true
formatter = { command = "terraform", args = ["fmt", "-"] }

[[language]]
name = "go"
auto-format = true
formatter = { command = "goimports" }

[language-server.gopls]
command = "gopls"
config = { "gofumpt" = true, "local" = "goimports", "semanticTokens" = true, "staticcheck" = true, "verboseOutput" = true, usePlaceholders = true, completeUnimported = true, hints = { "assignVariableType" = true, "compositeLiteralFields" = true, "compositeLiteralTypes" = true, "constantValues" = true, "functionTypeParameters" = true, "parameterNames" = true, "rangeVariableTypes" = true } }

# refer to https://github.com/estin/simple-completion-language-server
[language-server.scls]
command = "simple-completion-language-server"
